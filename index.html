<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Redirecting...</title>
  <script>
    (function () {
      const path = window.location.pathname;
      const urlParams = new URLSearchParams(window.location.search);

      // Only redirect from root, and only if not already redirected
      if ((path === "/" || path === "/index.html") && !urlParams.has("lang-redirect")) {
        const supportedLanguages = ["en", "it"];
        const userLang = (navigator.language || navigator.userLanguage || "en").slice(0, 2).toLowerCase();
        const finalLang = supportedLanguages.includes(userLang) ? userLang : "en";

        // Redirect with a query flag to prevent further redirects
        window.location.href = `/${finalLang}/?lang-redirect=true`;
      }
    })();
  </script>

  <!-- No-JS fallback -->
  <noscript>
    <meta http-equiv="refresh" content="0; url=/en/" />
  </noscript>
</head>
<body>
  <p>Redirecting...</p>
</body>
</html>
